<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>TowTruck recorder</title>
    <script>
      // FIXME: need to make this dynamic:
      defaultHubBase = "";
      baseUrl = (location.href + "").replace(/\/recorder\.html.*/, "");
      // FIXME: this is copied from towtruck.js:
      require = {
        context: "towtruck",
        baseUrl: baseUrl + "/towtruck",
        urlArgs: "bust=" + Date.now(),
        paths: {
          jquery: "libs/jquery-1.8.3.min",
          walkabout: "libs/walkabout.js/walkabout",
          tinycolor: "libs/tinycolor",
          "alien-avatar-generator": "libs/alien-avatar-generator"
        },
        deps: ["recorder"],
        callback: function () {
          require({context: "towtruck"})(["recorder"], function (recorder) {
            recorder.start({
              baseUrl: baseUrl,
              defaultHubBase: defaultHubBase
            });
          });
        }
      };
      console.log("require", require);
    </script>
    <script src="./towtruck/libs/require.js"></script>
    <link rel="stylesheet" href="recorder.css">
  </head>
  <body>

<div id="connection-status">
  <span id="not-connected" data-toggles="#connection-status span">Not Connected</span>
  <span id="connected" data-toggles="#connection-status span" style="display: none">Connected</span>
  <span id="no-session-id" data-toggles="#connection-status span" style="display: none">There's no <code>#&amp;towtruck=SESSION_ID</code> in the URL.</span>
  <button id="restart">Restart recording</button>
  <button id="select">Select record</button>
</div>

<div>
  <textarea id="record">/* TowTruck session starts */

</textarea>
</div>


  </body>
</html>
