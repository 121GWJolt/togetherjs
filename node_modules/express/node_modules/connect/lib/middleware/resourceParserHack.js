// Because of a combination of CORS request and Chrome security, we can only 
// receive text/plain content on a CORS POST. Pretty arbitrary, but it is 
// the way it is. bodyParser doesn't properly parse the text/plain 
// content, so we modify the content-type in this one case.
exports = module.exports = function resourceParserHack(options){
  options = options || {};
  return function resourceParserHack(req, res, next) {
    if (req.method == 'POST' && req.url == '/bundle') {
      req.headers['content-type'] = 'application/json'
    }
    next();
  }
};
