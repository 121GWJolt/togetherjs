<% /*

  This is used in TowTruck.addChat().  The variables provided:

  * nickname: the nickname of the user.  May be empty if the person is unknown.
  * personId: the ID of the person.  This is never empty, and unlike the nickname
    is stable.  personId is "system" if the message is generated by the system (
    not by a user).
  * personClass: a class name that must be used like <span
    class="personClass">nickname</span>: if the nickname is updated
    later these elements will be rewritten.
  * remote: true if the chat message came from another user, false if it was written
    by the local user.
  * message: the text message sent.
  * date: a date timestamp
  * combine: if true this message should be visually combined with the
    previous message.

*/ %>
<div class="towtruck-chat-message" 
 data-person="<%- personId %>" data-date="<%- date %>">
  <% if (combine) { %>
    &nbsp;
  <% } else { %>
    <span class="towtruck-chat-name <%- personClass %>">
      <%- nickname || "?" %>
    </span>:
  <% } %>
  <span class="towtruck-chat-content"><%- message %></span>
</div>
